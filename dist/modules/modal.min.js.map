{"version":3,"sources":["modal.min.js","modal/modal.js"],"names":["angular","module","provider","defaults","this","animation","backdropAnimation","prefixClass","prefixEvent","placement","template","contentTemplate","container","element","backdrop","keyboard","html","show","$get","$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions","ModalFactory","config","enterAnimateCallback","scope","$emit","options","$modal","leaveAnimateCallback","bodyElement","removeClass","hideOnBackdropClick","evt","target","currentTarget","focus","hide","preventEventDefault","preventDefault","$options","extend","$promise","fetchTemplate","$scope","$new","$id","id","attr","forEach","key","trustAsHtml","$hide","$$postDigest","$show","$toggle","toggle","$isShown","then","templateEl","contentEl","findElement","removeAttr","next","remove","outerHTML","modalLinker","modalElement","backdropElement","css","position","top","left","bottom","right","z-index","isObject","data","replace","htmlReplaceRegExp","trim","apply","init","destroy","$destroy","parent","after","isElement","lastChild","$element","clonedElement","defaultPrevented","display","addClass","enter","promise","safeDigest","el","requestAnimationFrame","on","$onKeyUp","leave","off","which","stopPropagation","$$phase","$root","$digest","query","document","querySelectorAll","fetchPromises","get","cache","res","String","prototype","setTimeout","body","directive","restrict","link","transclusion","isDefined","falseValueRegExp","test","$observe","newValue","oldValue","bsModal","$watch","content","modal","trigger","$on"],"mappings":"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","file":"modal.min.js","sourcesContent":[null,"'use strict';\n\nangular.module('mgcrea.ngStrap.modal', ['mgcrea.ngStrap.helpers.dimensions'])\n\n  .provider('$modal', function() {\n\n    var defaults = this.defaults = {\n      animation: 'am-fade',\n      backdropAnimation: 'am-fade',\n      prefixClass: 'modal',\n      prefixEvent: 'modal',\n      placement: 'top',\n      template: 'modal/modal.tpl.html',\n      contentTemplate: false,\n      container: false,\n      element: null,\n      backdrop: true,\n      keyboard: true,\n      html: false,\n      show: true\n    };\n\n    this.$get = function($window, $rootScope, $compile, $q, $templateCache, $http, $animate, $timeout, $sce, dimensions) {\n\n      var forEach = angular.forEach;\n      var trim = String.prototype.trim;\n      var requestAnimationFrame = $window.requestAnimationFrame || $window.setTimeout;\n      var bodyElement = angular.element($window.document.body);\n      var htmlReplaceRegExp = /ng-bind=\"/ig;\n\n      function ModalFactory(config) {\n\n        var $modal = {};\n\n        // Common vars\n        var options = $modal.$options = angular.extend({}, defaults, config);\n        $modal.$promise = fetchTemplate(options.template);\n        var scope = $modal.$scope = options.scope && options.scope.$new() || $rootScope.$new();\n        if(!options.element && !options.container) {\n          options.container = 'body';\n        }\n\n        // store $id to identify the triggering element in events\n        // give priority to options.id, otherwise, try to use\n        // element id if defined\n        $modal.$id = options.id || options.element && options.element.attr('id') || '';\n\n        // Support scope as string options\n        forEach(['title', 'content'], function(key) {\n          if(options[key]) scope[key] = $sce.trustAsHtml(options[key]);\n        });\n\n        // Provide scope helpers\n        scope.$hide = function() {\n          scope.$$postDigest(function() {\n            $modal.hide();\n          });\n        };\n        scope.$show = function() {\n          scope.$$postDigest(function() {\n            $modal.show();\n          });\n        };\n        scope.$toggle = function() {\n          scope.$$postDigest(function() {\n            $modal.toggle();\n          });\n        };\n        // Publish isShown as a protected var on scope\n        $modal.$isShown = scope.$isShown = false;\n\n        // Support contentTemplate option\n        if(options.contentTemplate) {\n          $modal.$promise = $modal.$promise.then(function(template) {\n            var templateEl = angular.element(template);\n            return fetchTemplate(options.contentTemplate)\n            .then(function(contentTemplate) {\n              var contentEl = findElement('[ng-bind=\"content\"]', templateEl[0]).removeAttr('ng-bind').html(contentTemplate);\n              // Drop the default footer as you probably don't want it if you use a custom contentTemplate\n              if(!config.template) contentEl.next().remove();\n              return templateEl[0].outerHTML;\n            });\n          });\n        }\n\n        // Fetch, compile then initialize modal\n        var modalLinker, modalElement;\n        var backdropElement = angular.element('<div class=\"' + options.prefixClass + '-backdrop\"/>');\n        backdropElement.css({position:'fixed', top:'0px', left:'0px', bottom:'0px', right:'0px', 'z-index': 1038});\n        $modal.$promise.then(function(template) {\n          if(angular.isObject(template)) template = template.data;\n          if(options.html) template = template.replace(htmlReplaceRegExp, 'ng-bind-html=\"');\n          template = trim.apply(template);\n          modalLinker = $compile(template);\n          $modal.init();\n        });\n\n        $modal.init = function() {\n\n          // Options: show\n          if(options.show) {\n            scope.$$postDigest(function() {\n              $modal.show();\n            });\n          }\n\n        };\n\n        $modal.destroy = function() {\n\n          // Remove element\n          if(modalElement) {\n            modalElement.remove();\n            modalElement = null;\n          }\n          if(backdropElement) {\n            backdropElement.remove();\n            backdropElement = null;\n          }\n\n          // Destroy scope\n          scope.$destroy();\n\n        };\n\n        $modal.show = function() {\n          if($modal.$isShown) return;\n\n          var parent, after;\n          if(angular.isElement(options.container)) {\n            parent = options.container;\n            after = options.container[0].lastChild ? angular.element(options.container[0].lastChild) : null;\n          } else {\n            if (options.container) {\n              parent = findElement(options.container);\n              after = parent[0].lastChild ? angular.element(parent[0].lastChild) : null;\n            } else {\n              parent = null;\n              after = options.element;\n            }\n          }\n\n          // Fetch a cloned element linked from template\n          modalElement = $modal.$element = modalLinker(scope, function(clonedElement, scope) {});\n\n          if(scope.$emit(options.prefixEvent + '.show.before', $modal).defaultPrevented) {\n            return;\n          }\n\n          // Set the initial positioning.\n          modalElement.css({display: 'block'}).addClass(options.placement);\n\n          // Options: animation\n          if(options.animation) {\n            if(options.backdrop) {\n              backdropElement.addClass(options.backdropAnimation);\n            }\n            modalElement.addClass(options.animation);\n          }\n\n          if(options.backdrop) {\n            $animate.enter(backdropElement, bodyElement, null);\n          }\n          // Support v1.3+ $animate\n          // https://github.com/angular/angular.js/commit/bf0f5502b1bbfddc5cdd2f138efd9188b8c652a9\n          var promise = $animate.enter(modalElement, parent, after, enterAnimateCallback);\n          if(promise && promise.then) promise.then(enterAnimateCallback);\n\n          $modal.$isShown = scope.$isShown = true;\n          safeDigest(scope);\n          // Focus once the enter-animation has started\n          // Weird PhantomJS bug hack\n          var el = modalElement[0];\n          requestAnimationFrame(function() {\n            el.focus();\n          });\n\n          bodyElement.addClass(options.prefixClass + '-open');\n          if(options.animation) {\n            bodyElement.addClass(options.prefixClass + '-with-' + options.animation);\n          }\n\n          // Bind events\n          if(options.backdrop) {\n            modalElement.on('click', hideOnBackdropClick);\n            backdropElement.on('click', hideOnBackdropClick);\n            backdropElement.on('wheel', preventEventDefault);\n          }\n          if(options.keyboard) {\n            modalElement.on('keyup', $modal.$onKeyUp);\n          }\n        };\n\n        function enterAnimateCallback() {\n          scope.$emit(options.prefixEvent + '.show', $modal);\n        }\n\n        $modal.hide = function() {\n          if(!$modal.$isShown) return;\n\n          if(scope.$emit(options.prefixEvent + '.hide.before', $modal).defaultPrevented) {\n            return;\n          }\n          var promise = $animate.leave(modalElement, leaveAnimateCallback);\n          // Support v1.3+ $animate\n          // https://github.com/angular/angular.js/commit/bf0f5502b1bbfddc5cdd2f138efd9188b8c652a9\n          if(promise && promise.then) promise.then(leaveAnimateCallback);\n\n          if(options.backdrop) {\n            $animate.leave(backdropElement);\n          }\n          $modal.$isShown = scope.$isShown = false;\n          safeDigest(scope);\n\n          // Unbind events\n          if(options.backdrop) {\n            modalElement.off('click', hideOnBackdropClick);\n            backdropElement.off('click', hideOnBackdropClick);\n            backdropElement.off('wheel', preventEventDefault);\n          }\n          if(options.keyboard) {\n            modalElement.off('keyup', $modal.$onKeyUp);\n          }\n        };\n\n        function leaveAnimateCallback() {\n          scope.$emit(options.prefixEvent + '.hide', $modal);\n          bodyElement.removeClass(options.prefixClass + '-open');\n          if(options.animation) {\n            bodyElement.removeClass(options.prefixClass + '-with-' + options.animation);\n          }\n        }\n\n        $modal.toggle = function() {\n\n          $modal.$isShown ? $modal.hide() : $modal.show();\n\n        };\n\n        $modal.focus = function() {\n          modalElement[0].focus();\n        };\n\n        // Protected methods\n\n        $modal.$onKeyUp = function(evt) {\n\n          if (evt.which === 27 && $modal.$isShown) {\n            $modal.hide();\n            evt.stopPropagation();\n          }\n\n        };\n\n        // Private methods\n\n        function hideOnBackdropClick(evt) {\n          if(evt.target !== evt.currentTarget) return;\n          options.backdrop === 'static' ? $modal.focus() : $modal.hide();\n        }\n\n        function preventEventDefault(evt) {\n          evt.preventDefault();\n        }\n\n        return $modal;\n\n      }\n\n      // Helper functions\n\n      function safeDigest(scope) {\n        scope.$$phase || (scope.$root && scope.$root.$$phase) || scope.$digest();\n      }\n\n      function findElement(query, element) {\n        return angular.element((element || document).querySelectorAll(query));\n      }\n\n      var fetchPromises = {};\n      function fetchTemplate(template) {\n        if(fetchPromises[template]) return fetchPromises[template];\n        return (fetchPromises[template] = $http.get(template, {cache: $templateCache}).then(function(res) {\n          return res.data;\n        }));\n      }\n\n      return ModalFactory;\n\n    };\n\n  })\n\n  .directive('bsModal', function($window, $sce, $modal) {\n\n    return {\n      restrict: 'EAC',\n      scope: true,\n      link: function postLink(scope, element, attr, transclusion) {\n\n        // Directive options\n        var options = {scope: scope, element: element, show: false};\n        angular.forEach(['template', 'contentTemplate', 'placement', 'container', 'animation', 'id'], function(key) {\n          if(angular.isDefined(attr[key])) options[key] = attr[key];\n        });\n\n        // use string regex match for boolean values\n        var falseValueRegExp = /^(false|0|)$/;\n        angular.forEach(['keyboard', 'html'], function(key) {\n          if(angular.isDefined(attr[key])) options[key] = !falseValueRegExp.test(attr[key]);\n        });\n\n        if(angular.isDefined(attr.backdrop)) {\n          options.backdrop = falseValueRegExp.test(attr.backdrop) ? false : attr.backdrop;\n        }\n\n        // Support scope as data-attrs\n        angular.forEach(['title', 'content'], function(key) {\n          attr[key] && attr.$observe(key, function(newValue, oldValue) {\n            scope[key] = $sce.trustAsHtml(newValue);\n          });\n        });\n\n        // Support scope as an object\n        attr.bsModal && scope.$watch(attr.bsModal, function(newValue, oldValue) {\n          if(angular.isObject(newValue)) {\n            angular.extend(scope, newValue);\n          } else {\n            scope.content = newValue;\n          }\n        }, true);\n\n        // Initialize modal\n        var modal = $modal(options);\n\n        // Trigger\n        element.on(attr.trigger || 'click', modal.toggle);\n\n        // Garbage collection\n        scope.$on('$destroy', function() {\n          if (modal) modal.destroy();\n          options = null;\n          modal = null;\n        });\n\n      }\n    };\n\n  });\n"],"sourceRoot":"/source/"}