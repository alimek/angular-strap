/**
 * angular-strap
 * @version v2.0.3 - 2015-11-27
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var a=this.defaults={animation:"am-fade",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF",function(b,c,d,e,f,g,h,i,j){function k(b,e){function f(){return"body"===r.container?i.offset(r.target||b[0]):i.position(r.target||b[0])}function g(a,b,c,d){var e,f=a.split("-");switch(f[0]){case"right":e={top:b.top+b.height/2-d/2,left:b.left+b.width};break;case"bottom":e={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case"left":e={top:b.top+b.height/2-d/2,left:b.left-c};break;default:e={top:b.top-d,left:b.left+b.width/2-c/2}}if(!f[1])return e;if("top"===f[0]||"bottom"===f[0])switch(f[1]){case"left":e.left=b.left;break;case"right":e.left=b.left+b.width-c}else if("left"===f[0]||"right"===f[0])switch(f[1]){case"top":e.top=b.top-d;break;case"bottom":e.top=b.top+b.height}return e}var k={},q=b[0].nodeName.toLowerCase(),r=k.$options=angular.extend({},a,e);k.$promise=m(r.template);var s=k.$scope=r.scope&&r.scope.$new()||c.$new();r.delay&&angular.isString(r.delay)&&(r.delay=parseFloat(r.delay)),r.title&&(k.$scope.title=r.title),s.$hide=function(){s.$$postDigest(function(){k.hide()})},s.$show=function(){s.$$postDigest(function(){k.show()})},s.$toggle=function(){s.$$postDigest(function(){k.toggle()})},k.$isShown=s.$isShown=!1;var t,u;r.contentTemplate&&(k.$promise=k.$promise.then(function(a){var b=angular.element(a);return m(r.contentTemplate).then(function(a){var c=l('[ng-bind="content"]',b[0]);return c.length||(c=l('[ng-bind="title"]',b[0])),c.removeAttr("ng-bind").html(a),b[0].outerHTML})}));var v,w,x,y;return k.$promise.then(function(a){angular.isObject(a)&&(a=a.data),r.html&&(a=a.replace(p,'ng-bind-html="')),a=n.apply(a),x=a,v=d(a),k.init()}),k.init=function(){r.delay&&angular.isNumber(r.delay)&&(r.delay={show:r.delay,hide:r.delay}),"self"===r.container?y=b:r.container&&(y=l(r.container));var a=r.trigger.split(" ");angular.forEach(a,function(a){"click"===a?b.on("click",k.toggle):"manual"!==a&&(b.on("hover"===a?"mouseenter":"focus",k.enter),b.on("hover"===a?"mouseleave":"blur",k.leave),"button"===q&&"hover"!==a&&b.on(o?"touchstart":"mousedown",k.$onFocusElementMouseDown))}),r.target&&(r.target=angular.isElement(r.target)?r.target:l(r.target)[0]),r.show&&s.$$postDigest(function(){"focus"===r.trigger?b[0].focus():k.show()})},k.destroy=function(){for(var a=r.trigger.split(" "),c=a.length;c--;){var d=a[c];"click"===d?b.off("click",k.toggle):"manual"!==d&&(b.off("hover"===d?"mouseenter":"focus",k.enter),b.off("hover"===d?"mouseleave":"blur",k.leave),"button"===q&&"hover"!==d&&b.off(o?"touchstart":"mousedown",k.$onFocusElementMouseDown))}w&&(w.remove(),w=null),clearTimeout(t),s.$destroy()},k.enter=function(){return clearTimeout(t),u="in",r.delay&&r.delay.show?void(t=setTimeout(function(){"in"===u&&k.show()},r.delay.show)):k.show()},k.show=function(){s.$emit(r.prefixEvent+".show.before",k);var a=r.container?y:null,c=r.container?null:b;w&&w.remove(),w=k.$element=v(s,function(a,b){}),w.css({top:"-9999px",left:"-9999px",display:"block"}).addClass(r.placement),r.animation&&w.addClass(r.animation),r.type&&w.addClass(r.prefixClass+"-"+r.type),h.enter(w,a,c,function(){s.$emit(r.prefixEvent+".show",k)}),k.$isShown=s.$isShown=!0,s.$$phase||s.$root&&s.$root.$$phase||s.$digest(),j(k.$applyPlacement),r.keyboard&&("focus"!==r.trigger?(k.focus(),w.on("keyup",k.$onKeyUp)):b.on("keyup",k.$onFocusKeyUp))},k.leave=function(){return clearTimeout(t),u="out",r.delay&&r.delay.hide?void(t=setTimeout(function(){"out"===u&&k.hide()},r.delay.hide)):k.hide()},k.hide=function(a){return k.$isShown?(s.$emit(r.prefixEvent+".hide.before",k),h.leave(w,function(){s.$emit(r.prefixEvent+".hide",k)}),k.$isShown=s.$isShown=!1,s.$$phase||s.$root&&s.$root.$$phase||s.$digest(),r.keyboard&&null!==w&&w.off("keyup",k.$onKeyUp),a&&"focus"===r.trigger?b[0].blur():void 0):void 0},k.toggle=function(){k.$isShown?k.leave():k.enter()},k.focus=function(){w[0].focus()},k.$applyPlacement=function(){if(w){var a=f(),b=w.prop("offsetWidth"),c=w.prop("offsetHeight"),d=g(r.placement,a,b,c);d.top+="px",d.left+="px",w.css(d)}},k.$onKeyUp=function(a){27===a.which&&k.hide()},k.$onFocusKeyUp=function(a){27===a.which&&b[0].blur()},k.$onFocusElementMouseDown=function(a){a.preventDefault(),a.stopPropagation(),k.$isShown?b[0].blur():b[0].focus()},k}function l(a,b){return angular.element((b||document).querySelectorAll(a))}function m(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var n=String.prototype.trim,o="createTouch"in b.document,p=/ng-bind="/gi;return k}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(a,b,c,d,e){return{restrict:"EAC",scope:!0,link:function(a,b,f,g){var h={scope:a};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type"],function(a){angular.isDefined(f[a])&&(h[a]=f[a])}),angular.forEach(["title"],function(b){f.$observe(b,function(d,f){a[b]=c.trustAsHtml(d),angular.isDefined(f)&&e(function(){i&&i.$applyPlacement()})})}),f.bsTooltip&&a.$watch(f.bsTooltip,function(b,c){angular.isObject(b)?angular.extend(a,b):a.title=b,angular.isDefined(c)&&e(function(){i&&i.$applyPlacement()})},!0),f.bsShow&&a.$watch(f.bsShow,function(a,b){i&&angular.isDefined(a)&&(angular.isString(a)&&(a=a.match(",?(tooltip),?")),a===!0?i.show():i.hide())});var i=d(b,h);a.$on("$destroy",function(){i.destroy(),h=null,i=null})}}}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(a){a.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}]);
//# sourceMappingURL=tooltip.min.js.map