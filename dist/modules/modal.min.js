/**
 * angular-strap
 * @version v2.0.3 - 2014-07-14
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var a=this.defaults={prefixClass:"modal",prefixEvent:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,keyboard:!1,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$timeout","$sce",function(b,c,d,e,f,g,h,i){function j(b){var e={},f=e.$options=angular.extend({},a,b);e.$promise=l(f.template);var g=e.$scope=f.scope&&f.scope.$new()||c.$new();f.element||f.container||(f.container="body"),m(["title","content"],function(a){f[a]&&(g[a]=i.trustAsHtml(f[a]))}),g.$hide=function(){g.$$postDigest(function(){e.hide()})},g.$show=function(){g.$$postDigest(function(){e.show()})},g.$toggle=function(){g.$$postDigest(function(){e.toggle()})},f.contentTemplate&&(e.$promise=e.$promise.then(function(a){var c=angular.element(a);return l(f.contentTemplate).then(function(a){var d=k('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var h,j;return e.$promise.then(function(a){angular.isObject(a)&&(a=a.data),f.html&&(a=a.replace(p,'ng-bind-html="')),a=n.apply(a),h=d(a),e.init()}),e.init=function(){f.show&&g.$$postDigest(function(){e.show()}),j=e.$element=h(g,function(){});var a=f.container?k(f.container):null;a.append(j)},e.destroy=function(){j&&(j.remove(),j=null),g.$destroy()},e.show=function(){g.$emit(f.prefixEvent+".show.before",e),j.css({display:"block"}).addClass(f.placement),g.$emit(f.prefixEvent+".show",e),g.$isShown=!0,g.$$phase||g.$root&&g.$root.$$phase||g.$digest();var a=j[0];o(function(){a.focus()});var b=f.container?k(f.container):null;b&&b.addClass("is-visible"),f.keyboard&&j.on("keyup",e.$onKeyUp)},e.hide=function(){g.$emit(f.prefixEvent+".hide.before",e),g.$emit(f.prefixEvent+".hide",e);var a=f.container?k(f.container):null;a&&a.removeClass("is-visible"),g.$isShown=!1,g.$$phase||g.$root&&g.$root.$$phase||g.$digest(),f.keyboard&&j.off("keyup",e.$onKeyUp)},e.toggle=function(){g.$isShown?e.hide():e.show()},e.focus=function(){j[0].focus()},e.$onKeyUp=function(a){27===a.which&&e.hide()},e}function k(a,b){return angular.element((b||document).querySelectorAll(a))}function l(a){return e.when(f.get(a)||g.get(a)).then(function(b){return angular.isObject(b)?(f.put(a,b.data),b.data):b})}var m=angular.forEach,n=String.prototype.trim,o=b.requestAnimationFrame||b.setTimeout,p=(angular.element(b.document.body),/ng-bind="/gi);return j}]}).directive("bsModal",["$window","$location","$sce","$modal",function(a,b,c,d){return{restrict:"EAC",scope:!0,link:function(a,b,e){var f={scope:a,element:b,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container"],function(a){angular.isDefined(e[a])&&(f[a]=e[a])}),angular.forEach(["title","content"],function(b){e[b]&&e.$observe(b,function(d){a[b]=c.trustAsHtml(d)})}),e.bsModal&&a.$watch(e.bsModal,function(b){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var g=d(f);b.on(e.trigger||"click",g.toggle),a.$on("$destroy",function(){g.destroy(),f=null,g=null})}}}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(a){a.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]);
//# sourceMappingURL=modal.min.js.map